<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">

<link rel="stylesheet" href="/static/mdb.min.css">
<link rel="stylesheet" href="/static/fontawesome-free-5.15.3-web/css/all.min.css">
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/mdb.min.js"></script>
<link href="/static/css/addons/datatables.min.css" rel="stylesheet">
<!-- DataTables JS -->
<script src="/static/js/addons/datatables.min.js" type="text/javascript"></script>

<!-- DataTables Select CSS -->
<link href="/static/css/addons/datatables-select.min.css" rel="stylesheet">
<!-- DataTables Select JS -->
<script src="/static/js/addons/datatables-select.min.js" type="text/javascript"></script>
</head>
<body>


<div class="container">
    <div class="row">
        <div class="col-md-12">
        Saha No:<select name="" id="select">
        {% for saha_no in data %}
            <option value="{{saha_no}}">{{saha_no}}</option>
        {% endfor %}
    </select>
    <button class="btn btn-outline-dark run">Run</button>
            <table id="dt-basic-checkbox" class="table table-striped table-bordered" cellspacing="0" width="100%">
                <thead>
                  <tr>
                    <th></th>
                    <th class="th-sm">Saha No
                    </th>
                    <th class="th-sm">Saha Kod
                    </th>
                    <th class="th-sm">Ref 1
                    </th>
                    <th class="th-sm">Ref 2
                    </th>
                    <th class="th-sm">Ref 3
                    </th>
                    <th class="th-sm">Ref 4
                    </th>
                    <th class="th-sm">Ref 5
                    </th>
                    <th class="th-sm">Ref 6
                    </th>
                    <th class="th-sm">Ref Grup
                    </th>
                    <th class="th-sm">Sonuc
                    </th>
                    <th class="th-sm">Kontrol</th>
                    <th class="th-sm">Kategori</th>
                    <th class="th-sm">Sorgu No</th>
                    <th class="th-sm">Açıklama</th>
                    <th class="th-sm">Save Data</th>
                  </tr>
                </thead>
                <tbody class="tbody">
                
                </tbody>
                
              </table>
              </div>
        </div>
    </div>
</div>
    

    <script>
    $(".run").click(() => {
       var saha_no = $("#select").val()
       console.log(saha_no)
       $.get("/girdiler?saha_no=" + saha_no, (res) => {
           $(".tbody").html("")
           $(".tbody").html(res)
               $('#dt-basic-checkbox').dataTable({
        scrollX:true,
        scrollY:true,
        destroy:true,
        columnDefs: [{
        orderable: false,
        className: 'select-checkbox',
        targets: 0
        }],
        select: {
        style: 'os',
        selector: 'td:first-child'
        }
        });
        $(".save").click(function(){
            var girdi_id = $(this)[0].dataset.id
            var aciklama = $(this).parent().parent().find("input").val()
            console.log(aciklama)
            $.get("updateAciklama?girdi_id=" + girdi_id + "&aciklama=" + aciklama, (res) => {
                console.log(res)
            })
        })
        $(".select-checkbox").click(
            function(el){
                var parent = $(el.target).parent()
                if(!parent.hasClass("selected")){
                    $(parent).find("input").removeAttr("readonly")
                }
                else{
                    $(parent).find("input").attr("readonly", "true")
                }
            })    
       })
    })
</script>
</body>
</html>